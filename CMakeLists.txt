cmake_minimum_required(VERSION 3.10)
project(nostrc)

# Top-level build for the nostrc monorepo.
# This project builds multiple libraries:
#  - libgo: Go-like concurrency primitives in C (channels, contexts, etc.)
#  - libnostr: Core Nostr protocol types and helpers
#  - libjson: JSON interop layer based on jansson
# It also configures tests under `tests/` via CTest.

# Options to enable/disable NIPs and NSON
# Note: NipOptions.cmake may define per-NIP toggles if present. It is optional.
include(${CMAKE_SOURCE_DIR}/NipOptions.cmake)

# Toggle optional NSON support (custom serialization). When ON, the `nson/` subdir
# may be built and linked by consumers that need it.
option(ENABLE_NSON "Enable NSON compilation" OFF)

# Build order ensures libgo is available for libnostr/libjson as needed.
add_subdirectory(libgo)
add_subdirectory(libnostr)
add_subdirectory(libjson)

# Enable CTest and add test targets from `tests/`.
enable_testing()
add_subdirectory(tests)

